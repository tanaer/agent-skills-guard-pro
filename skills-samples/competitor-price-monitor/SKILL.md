---
name: competitor-price-monitor
description: 监控竞品网站价格变动，检测到变化时发送通知。支持多个竞品URL批量监控，自动对比历史价格，发现差异立即提醒。
---

# 竞品价格监控雷达

自动监控竞品定价页面，检测价格变动并发送通知。

## 触发条件

当用户说以下内容时启动此技能：
- "监控竞品价格"
- "检查竞品定价变化"
- "competitor price monitor"
- "价格变动预警"

## 工作流程

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│  读取竞品列表    │───▶│  抓取价格信息    │───▶│  对比历史数据    │
│  (JSON/CSV)     │    │  (WebFetch)     │    │  (本地缓存)     │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                                      │
                              ┌───────────────────────┴───────────────────────┐
                              ▼                                               ▼
                    ┌─────────────────┐                             ┌─────────────────┐
                    │  价格无变化      │                             │  检测到变化      │
                    │  更新检查时间    │                             │  生成报告+通知   │
                    └─────────────────┘                             └─────────────────┘
```

## 执行步骤

### 步骤 1：准备竞品列表

检查用户是否提供了竞品 URL 列表。如果没有，创建示例配置文件：

```json
// competitors.json
{
  "competitors": [
    {
      "name": "竞品A",
      "pricing_url": "https://example.com/pricing",
      "last_pricing": "",
      "last_check": ""
    }
  ]
}
```

### 步骤 2：抓取价格信息

对每个竞品 URL：

1. 使用 WebFetch 获取页面内容
2. 提取价格相关信息，包括：
   - 各套餐名称
   - 月付/年付价格
   - 主要功能特性（前3个）
3. 生成结构化的价格摘要

**Prompt 模板**（用于分析页面）：
```
这是一个定价页面。请简洁地总结所有套餐计划：

对于每个套餐，列出：
1. 套餐名称
2. 月付价格
3. 年付价格（如有）
4. 前3个主要功能

返回格式：
- 套餐名: [名称]
  - 月付: $XX
  - 年付: $XX/年
  - 功能: 功能1, 功能2, 功能3
```

### 步骤 3：对比历史数据

读取本地缓存的历史价格数据，与新抓取的数据对比：

- **[NEW]**: 首次抓取，无历史数据
- **[SIMILAR]**: 价格无实质变化
- **[DIFF]**: 检测到价格变动

### 步骤 4：更新缓存并通知

1. 将新价格数据保存到本地 JSON 文件
2. 如果检测到变化（[DIFF]），生成变动报告：

```markdown
## 竞品价格变动报告

**竞品**: [名称]
**URL**: [链接]
**检测时间**: [时间戳]

### 变动详情
- [具体变动描述]

### 当前价格
[最新价格摘要]
```

## 数据存储

价格历史缓存保存在：`~/.claude/cache/competitor-prices.json`

```json
{
  "last_updated": "2025-12-29T10:00:00Z",
  "competitors": {
    "example.com": {
      "name": "竞品A",
      "url": "https://example.com/pricing",
      "pricing_summary": "...",
      "last_check": "2025-12-29T10:00:00Z"
    }
  }
}
```

## 使用示例

### 示例 1：监控单个竞品

```
用户: 帮我监控 https://n8n.io/pricing 的价格变化

Claude:
1. 访问 n8n.io/pricing 页面
2. 提取价格信息
3. 与历史记录对比
4. 返回结果报告
```

### 示例 2：批量监控

```
用户: 监控这些竞品的价格：
- https://zapier.com/pricing
- https://make.com/pricing
- https://pipedream.com/pricing

Claude:
1. 依次访问每个定价页面
2. 提取并对比价格
3. 汇总生成报告
```

## 依赖工具

- **WebFetch**: 抓取网页内容
- **Read/Write**: 读写本地缓存文件
- **Bash**: 创建目录、时间戳等

## 限制说明

- 部分网站可能有反爬机制，WebFetch 可能无法获取完整内容
- 动态加载的价格（需要 JavaScript 执行）可能无法正确抓取
- 建议定期手动验证抓取结果的准确性

## 原始 n8n 工作流

此 Skill 改编自 n8n 模板：
- 模板ID: 3480
- 原名: Get notified when your competitors change their pricing with Airtop and Slack
- 链接: https://n8n.io/workflows/3480

原工作流使用 Airtop（AI浏览器）+ Slack 通知，本 Skill 改用 Claude 原生能力实现。
