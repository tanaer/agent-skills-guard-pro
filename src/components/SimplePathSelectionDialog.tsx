import { useState } from 'react';
import { useTranslation } from 'react-i18next';
import {
  AlertDialog,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogCancel,
} from '@/components/ui/alert-dialog';
import { InstallPathSelector } from './InstallPathSelector';

interface SimplePathSelectionDialogProps {
  open: boolean;
  skillName: string;
  onClose: () => void;
  onConfirm: (selectedPaths: string[]) => void;
}

export function SimplePathSelectionDialog({
  open,
  skillName,
  onClose,
  onConfirm,
}: SimplePathSelectionDialogProps) {
  const { t } = useTranslation();
  const [selectedPaths, setSelectedPaths] = useState<string[]>([]);

  return (
    <AlertDialog open={open} onOpenChange={onClose}>
      <AlertDialogContent className="max-w-2xl">
        <AlertDialogHeader>
          <AlertDialogTitle>
            {t('skills.pathSelection.selectInstallPath')}
          </AlertDialogTitle>
          <AlertDialogDescription>
            {t('skills.pathSelection.selectPathDescription', { skillName })}
          </AlertDialogDescription>
        </AlertDialogHeader>

        {/* 路径选择器 */}
        <div className="py-4">
          <InstallPathSelector onSelect={setSelectedPaths} />
        </div>

        <AlertDialogFooter>
          <AlertDialogCancel onClick={onClose}>
            {t('skills.pathSelection.cancel')}
          </AlertDialogCancel>
          <button
            onClick={() => onConfirm(selectedPaths)}
            disabled={selectedPaths.length === 0}
            className="macos-button-primary disabled:opacity-50"
          >
            {selectedPaths.length > 1
              ? t('skills.pathSelection.confirmMultiple', { count: selectedPaths.length })
              : t('skills.pathSelection.confirm')}
          </button>
        </AlertDialogFooter>
      </AlertDialogContent>
    </AlertDialog>
  );
}
