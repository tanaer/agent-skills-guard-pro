# æŠ€èƒ½å¸‚åœºé‡æ–°è®¾è®¡æ–¹æ¡ˆ

**æ—¥æœŸ**: 2025-12-30
**çŠ¶æ€**: è®¾è®¡å®Œæˆï¼Œå¾…å®ç°

## æ¦‚è¿°

å°†ç°æœ‰çš„æŠ€èƒ½ç®¡ç†é¡µé¢é‡æ„ä¸ºç±»ä¼¼åº”ç”¨å•†åº—çš„åŒé¡µé¢æ¨¡å¼ï¼Œæä¾›æ›´æ¸…æ™°çš„"å·²å®‰è£…"å’Œ"æµè§ˆå‘ç°"ä¸¤ç§ä½¿ç”¨åœºæ™¯ï¼Œå¹¶æ”¯æŒå¤§è§„æ¨¡æŠ€èƒ½ç®¡ç†ï¼ˆæˆåƒä¸Šä¸‡ä¸ªæŠ€èƒ½ï¼‰çš„æœç´¢å’Œç­›é€‰éœ€æ±‚ã€‚

## è®¾è®¡å†³ç­–

é€šè¿‡ä¸ç”¨æˆ·çš„å¤šè½®è®¨è®ºï¼Œç¡®å®šäº†ä»¥ä¸‹å…³é”®è®¾è®¡å†³ç­–ï¼š

1. **é¡µé¢ç»“æ„**: ä¸‰ä¸ªTabï¼ˆå·²å®‰è£…ã€æŠ€èƒ½å¸‚åœºã€ä»“åº“ç®¡ç†ï¼‰
2. **å¯¼èˆªæ–¹å¼**: Tabåˆ‡æ¢ï¼ˆä¿æŒç°æœ‰æ–¹å¼ï¼Œå‡çº§åŠŸèƒ½ï¼‰
3. **æœç´¢åŠŸèƒ½**: åŸºç¡€æœç´¢ï¼ˆæŠ€èƒ½åç§°ã€æè¿°ï¼‰ï¼Œå®æ—¶æœç´¢
4. **ä»“åº“æ ‡è¯†**: æ·»åŠ  `repository_owner` å­—æ®µï¼Œä» `repository_url` è§£æ
5. **ç­›é€‰å™¨å¸ƒå±€**: å•è¡Œç´§å‡‘å¸ƒå±€ï¼ˆæœç´¢æ¡† + ä»“åº“ä¸‹æ‹‰ + éšè—å·²å®‰è£…å¤é€‰æ¡†ï¼‰

## é¡µé¢ç»“æ„

### 1. å·²å®‰è£…é¡µé¢ï¼ˆInstalled Skillsï¼‰

**åŠŸèƒ½å®šä½**: ç®¡ç†å·²å®‰è£…çš„æŠ€èƒ½

**UIå¸ƒå±€**:

```
å·²å®‰è£…
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ” æœç´¢å·²å®‰è£…çš„æŠ€èƒ½...]                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ > å·²å®‰è£… 23 ä¸ªæŠ€èƒ½                              â”‚
â”‚ æŠ€èƒ½å¡ç‰‡åˆ—è¡¨...                                 â”‚
```

**æ ¸å¿ƒåŠŸèƒ½**:

- æœç´¢æ¡†ï¼šæœç´¢æŠ€èƒ½åç§°å’Œæè¿°ï¼ˆå®æ—¶æœç´¢ï¼‰
- ç»Ÿè®¡ä¿¡æ¯ï¼šæ˜¾ç¤ºå·²å®‰è£…æŠ€èƒ½æ•°é‡
- æŠ€èƒ½å¡ç‰‡ï¼šæ˜¾ç¤ºåç§°ã€æ¥æºæ ‡è¯†ï¼ˆ@ownerï¼‰ã€å®‰å…¨è¯„åˆ†ã€æœ¬åœ°è·¯å¾„
- æ“ä½œæŒ‰é’®ï¼šå¸è½½ã€åˆ é™¤ã€æ‰“å¼€æ–‡ä»¶å¤¹

### 2. æŠ€èƒ½å¸‚åœºé¡µé¢ï¼ˆSkills Marketplaceï¼‰

**åŠŸèƒ½å®šä½**: æµè§ˆå’Œå‘ç°æ‰€æœ‰å¯ç”¨æŠ€èƒ½

**UIå¸ƒå±€**:

```
æŠ€èƒ½å¸‚åœº
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ” æœç´¢æŠ€èƒ½........] [ä»“åº“â–¼] [â˜éšè—å·²å®‰è£…]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ > æ‰¾åˆ° 125 ä¸ªæŠ€èƒ½                               â”‚
â”‚ æŠ€èƒ½å¡ç‰‡åˆ—è¡¨...                                 â”‚
```

**æ§ä»¶å¸ƒå±€**ï¼ˆå•è¡Œç´§å‡‘ï¼‰:

- æœç´¢æ¡†ï¼šå çº¦60%å®½åº¦
- ä»“åº“ä¸‹æ‹‰é€‰æ‹©å™¨ï¼šå çº¦25%å®½åº¦ï¼Œé»˜è®¤"å…¨éƒ¨"
- éšè—å·²å®‰è£…å¤é€‰æ¡†ï¼šå çº¦15%å®½åº¦

**æ ¸å¿ƒåŠŸèƒ½**:

- æœç´¢ï¼šå®æ—¶æœç´¢æŠ€èƒ½åç§°å’Œæè¿°
- ä»“åº“ç­›é€‰ï¼šä¸‹æ‹‰èœå•é€‰æ‹©ç‰¹å®šä»“åº“ï¼Œæ˜¾ç¤ºæ¯ä¸ªä»“åº“çš„æŠ€èƒ½æ•°é‡
  ```
  å…¨éƒ¨ (1,234)
  anthropics (456)
  superpowers-marketplace (789)
  æœ¬åœ° (23)
  ```
- å®‰è£…çŠ¶æ€ç­›é€‰ï¼šå¤é€‰æ¡†éšè—å·²å®‰è£…æŠ€èƒ½
- æŠ€èƒ½å¡ç‰‡ï¼šæ˜¾ç¤ºåç§°ã€æ¥æºæ ‡è¯†ã€å®‰å…¨è¯„åˆ†ã€å®‰è£…çŠ¶æ€
- æ“ä½œæŒ‰é’®ï¼šå®‰è£…ã€å¸è½½ã€åˆ é™¤

### 3. ä»“åº“ç®¡ç†é¡µé¢ï¼ˆRepositoriesï¼‰

ä¿æŒç°æœ‰åŠŸèƒ½ä¸å˜ï¼Œç”¨äºæ·»åŠ ã€åˆ é™¤ã€æ‰«ææŠ€èƒ½ä»“åº“ã€‚

## æ•°æ®ç»“æ„å˜æ›´

### Skillæ¥å£æ‰©å±•

**TypeScript**:

```typescript
export interface Skill {
  id: string;
  name: string;
  description?: string;
  repository_url: string;
  repository_owner?: string;  // æ–°å¢ï¼šä»“åº“æ‰€æœ‰è€…ï¼Œå¦‚ "anthropics"
  file_path: string;
  version?: string;
  author?: string;
  installed: boolean;
  installed_at?: string;
  local_path?: string;
  checksum?: string;
  security_score?: number;
  security_issues?: string[];
}
```

**Rust**:

```rust
#[derive(Serialize, Deserialize, Clone, Debug)]
pub struct Skill {
    pub id: String,
    pub name: String,
    pub description: Option<String>,
    pub repository_url: String,
    pub repository_owner: Option<String>,  // æ–°å¢
    pub file_path: String,
    pub version: Option<String>,
    pub author: Option<String>,
    pub installed: bool,
    pub installed_at: Option<DateTime<Utc>>,
    pub local_path: Option<String>,
    pub checksum: Option<String>,
    pub security_score: Option<i32>,
    pub security_issues: Option<Vec<String>>,
}
```

### ä»“åº“æ‰€æœ‰è€…è§£æé€»è¾‘

**å‰ç«¯å·¥å…·å‡½æ•°** (`src/lib/utils.ts`):

```typescript
// ä»repository_urlè§£æä»“åº“æ‰€æœ‰è€…
export function parseRepositoryOwner(repositoryUrl: string): string {
  if (repositoryUrl === "local") return "æœ¬åœ°";

  // è§£æGitHub URL: https://github.com/anthropics/skills
  const match = repositoryUrl.match(/github\.com\/([^\/]+)/);
  return match ? match[1] : "æœªçŸ¥";
}

// æ ¼å¼åŒ–æ˜¾ç¤ºä»“åº“æ ‡è¯†
export function formatRepositoryTag(skill: Skill): string {
  const owner = skill.repository_owner || parseRepositoryOwner(skill.repository_url);
  return owner === "æœ¬åœ°" ? "ğŸ“ æœ¬åœ°" : `@${owner}`;
}
```

**åç«¯è§£æ** (Rust):
åœ¨æ‰«æå’Œå®‰è£…æŠ€èƒ½æ—¶ï¼Œè‡ªåŠ¨è§£æå¹¶å¡«å…… `repository_owner` å­—æ®µï¼š

- GitHubä»“åº“ï¼šæå–ç”¨æˆ·å/ç»„ç»‡åï¼ˆå¦‚ "anthropics"ï¼‰
- æœ¬åœ°æŠ€èƒ½ï¼šè®¾ç½®ä¸º "local"

## ç»„ä»¶è®¾è®¡

### ç»„ä»¶ç»“æ„

```
src/components/
â”œâ”€â”€ InstalledSkillsPage.tsx  # æ–°å¢ï¼šå·²å®‰è£…é¡µé¢
â”œâ”€â”€ MarketplacePage.tsx      # æ–°å¢ï¼šæŠ€èƒ½å¸‚åœºé¡µé¢
â”œâ”€â”€ SkillCard.tsx            # æ”¹è¿›ï¼šæ·»åŠ ä»“åº“æ ‡è¯†å¾½ç« 
â”œâ”€â”€ RepositoriesPage.tsx     # ä¿æŒä¸å˜
â””â”€â”€ ... (å…¶ä»–ç»„ä»¶)
```

### InstalledSkillsPage.tsxï¼ˆå·²å®‰è£…é¡µé¢ï¼‰

**çŠ¶æ€ç®¡ç†**:

```typescript
const [searchQuery, setSearchQuery] = useState("");
const { data: installedSkills, isLoading } = useInstalledSkills();
```

**ç­›é€‰é€»è¾‘**:

```typescript
const filteredSkills = installedSkills?.filter(skill =>
  !searchQuery ||
  skill.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
  skill.description?.toLowerCase().includes(searchQuery.toLowerCase())
);
```

**UIç»„ä»¶**:

- æœç´¢æ¡†ï¼ˆå¸¦å›¾æ ‡ï¼Œå®æ—¶æœç´¢ï¼‰
- ç»Ÿè®¡ä¿¡æ¯
- æŠ€èƒ½å¡ç‰‡åˆ—è¡¨
- ç©ºçŠ¶æ€æç¤º

### MarketplacePage.tsxï¼ˆæŠ€èƒ½å¸‚åœºé¡µé¢ï¼‰

**çŠ¶æ€ç®¡ç†**:

```typescript
const [searchQuery, setSearchQuery] = useState("");
const [selectedRepository, setSelectedRepository] = useState("all");
const [hideInstalled, setHideInstalled] = useState(false);
const { data: allSkills, isLoading } = useSkills();
```

**ä»“åº“åˆ—è¡¨æå–**:

```typescript
const repositories = useMemo(() => {
  const owners = new Set(
    allSkills?.map(s => s.repository_owner || "æœªçŸ¥") || []
  );
  return ["å…¨éƒ¨", ...Array.from(owners).sort()];
}, [allSkills]);

// ç»Ÿè®¡æ¯ä¸ªä»“åº“çš„æŠ€èƒ½æ•°é‡
const repositoryCounts = useMemo(() => {
  const counts: Record<string, number> = {};
  allSkills?.forEach(skill => {
    const owner = skill.repository_owner || "æœªçŸ¥";
    counts[owner] = (counts[owner] || 0) + 1;
  });
  counts["å…¨éƒ¨"] = allSkills?.length || 0;
  return counts;
}, [allSkills]);
```

**ç­›é€‰é€»è¾‘**:

```typescript
const filteredSkills = useMemo(() => {
  return allSkills?.filter(skill => {
    // æœç´¢è¿‡æ»¤
    const matchesSearch = !searchQuery ||
      skill.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
      skill.description?.toLowerCase().includes(searchQuery.toLowerCase());

    // ä»“åº“è¿‡æ»¤
    const matchesRepo = selectedRepository === "å…¨éƒ¨" ||
      skill.repository_owner === selectedRepository;

    // å®‰è£…çŠ¶æ€è¿‡æ»¤
    const matchesInstalled = !hideInstalled || !skill.installed;

    return matchesSearch && matchesRepo && matchesInstalled;
  }) || [];
}, [allSkills, searchQuery, selectedRepository, hideInstalled]);
```

**UIç»„ä»¶**:

- æœç´¢æ¡†ï¼ˆå¸¦é˜²æŠ–ï¼Œ300msï¼‰
- ä»“åº“ä¸‹æ‹‰é€‰æ‹©å™¨ï¼ˆæ˜¾ç¤ºæŠ€èƒ½æ•°é‡ï¼‰
- "éšè—å·²å®‰è£…"å¤é€‰æ¡†
- ç»Ÿè®¡ä¿¡æ¯
- æŠ€èƒ½å¡ç‰‡åˆ—è¡¨

### SkillCard.tsxï¼ˆæŠ€èƒ½å¡ç‰‡ç»„ä»¶ï¼‰

**æ”¹è¿›ç‚¹**:

- åœ¨æŠ€èƒ½åç§°æ—è¾¹æ·»åŠ ä»“åº“æ ‡è¯†å¾½ç« 
- æ˜¾ç¤ºæ ¼å¼ï¼š`æŠ€èƒ½åç§° @owner`
- æ ·å¼åŒºåˆ†ï¼š
  - æœ¬åœ°æŠ€èƒ½ï¼šç°è‰²å¾½ç« ï¼Œå‰ç¼€ ğŸ“
  - è¿œç¨‹ä»“åº“ï¼šé’è‰²å¾½ç« ï¼Œå‰ç¼€ @

**ç¤ºä¾‹ä»£ç **:

```tsx
<div className="flex items-center gap-3 mb-2">
  <h3 className="text-lg font-bold text-foreground">
    {skill.name}
  </h3>

  {/* ä»“åº“æ ‡è¯†å¾½ç«  */}
  <span className={`
    status-indicator text-xs font-mono
    ${skill.repository_owner === "local"
      ? "text-muted-foreground border-muted-foreground/30 bg-muted/10"
      : "text-terminal-cyan border-terminal-cyan/30 bg-terminal-cyan/10"
    }
  `}>
    {formatRepositoryTag(skill)}
  </span>

  {/* å®‰è£…çŠ¶æ€ */}
  {skill.installed && (
    <span className="status-installed">{t('skills.installed')}</span>
  )}
</div>
```

## æ€§èƒ½ä¼˜åŒ–

### 1. è™šæ‹Ÿæ»šåŠ¨ï¼ˆVirtualizationï¼‰

ä½¿ç”¨ `@tanstack/react-virtual` åº“å®ç°è™šæ‹Ÿæ»šåŠ¨ï¼š

```typescript
import { useVirtualizer } from '@tanstack/react-virtual';

const parentRef = useRef<HTMLDivElement>(null);

const rowVirtualizer = useVirtualizer({
  count: filteredSkills.length,
  getScrollElement: () => parentRef.current,
  estimateSize: () => 200, // ä¼°è®¡æ¯ä¸ªå¡ç‰‡é«˜åº¦
  overscan: 5, // é¢„æ¸²æŸ“5ä¸ªé¢å¤–é¡¹
});

// åªåœ¨æŠ€èƒ½æ•°é‡è¶…è¿‡100æ—¶å¯ç”¨è™šæ‹Ÿæ»šåŠ¨
const shouldVirtualize = filteredSkills.length > 100;
```

**ä¼˜åŠ¿**:

- å³ä½¿æœ‰10,000ä¸ªæŠ€èƒ½ï¼Œä¹Ÿåªæ¸²æŸ“å¯è§åŒºåŸŸçš„~20ä¸ªDOMèŠ‚ç‚¹
- æ»šåŠ¨æ€§èƒ½ä¿æŒæµç•…
- å†…å­˜å ç”¨å¤§å¹…é™ä½

### 2. æœç´¢å’Œç­›é€‰ä¼˜åŒ–

**é˜²æŠ–å¤„ç†**:

```typescript
import { useDebouncedValue } from '@/hooks/useDebouncedValue';

const [searchInput, setSearchInput] = useState("");
const searchQuery = useDebouncedValue(searchInput, 300);
```

**ç¼“å­˜ä¼˜åŒ–**:

```typescript
// ä½¿ç”¨ useMemo ç¼“å­˜ç­›é€‰ç»“æœ
const filteredSkills = useMemo(() => {
  // ç­›é€‰é€»è¾‘
}, [allSkills, searchQuery, selectedRepository, hideInstalled]);

// ä½¿ç”¨ useMemo ç¼“å­˜ä»“åº“åˆ—è¡¨
const repositories = useMemo(() => {
  // æå–é€»è¾‘
}, [allSkills]);
```

### 3. æ•°æ®åŠ è½½ç­–ç•¥

- **å·²å®‰è£…é¡µé¢**ï¼šåªåŠ è½½å·²å®‰è£…æŠ€èƒ½ï¼ˆé€šè¿‡ `useInstalledSkills()` hookï¼‰
- **æŠ€èƒ½å¸‚åœºé¡µé¢**ï¼šåŠ è½½æ‰€æœ‰æŠ€èƒ½ï¼Œä½¿ç”¨React Queryç¼“å­˜
- **React Queryé…ç½®**ï¼š
  ```typescript
  const { data: allSkills } = useQuery({
    queryKey: ["skills"],
    queryFn: api.getSkills,
    staleTime: 5 * 60 * 1000, // 5åˆ†é’Ÿå†…æ•°æ®è§†ä¸ºæ–°é²œ
    cacheTime: 10 * 60 * 1000, // 10åˆ†é’Ÿç¼“å­˜æ—¶é—´
  });
  ```

### 4. ç”¨æˆ·ä½“éªŒå¢å¼º

**åŠ è½½çŠ¶æ€**:

```tsx
{isLoading ? (
  <div className="grid gap-4">
    {[1, 2, 3].map(i => (
      <SkeletonCard key={i} />
    ))}
  </div>
) : (
  // æŠ€èƒ½åˆ—è¡¨
)}
```

**ç©ºçŠ¶æ€**:

```tsx
{filteredSkills.length === 0 && !isLoading && (
  <EmptyState
    icon={<Search />}
    title="æœªæ‰¾åˆ°åŒ¹é…çš„æŠ€èƒ½"
    description={
      searchQuery
        ? `æ²¡æœ‰æ‰¾åˆ°åŒ…å«"${searchQuery}"çš„æŠ€èƒ½`
        : "å½“å‰ç­›é€‰æ¡ä»¶ä¸‹æ²¡æœ‰æŠ€èƒ½"
    }
    action={
      <button onClick={() => {
        setSearchQuery("");
        setSelectedRepository("å…¨éƒ¨");
        setHideInstalled(false);
      }}>
        æ¸…é™¤ç­›é€‰
      </button>
    }
  />
)}
```

**æœç´¢é«˜äº®**ï¼ˆå¯é€‰ä¼˜åŒ–ï¼‰:

```typescript
function highlightMatch(text: string, query: string) {
  if (!query) return text;

  const regex = new RegExp(`(${query})`, 'gi');
  return text.replace(regex, '<mark>$1</mark>');
}
```

## æ•°æ®åº“è¿ç§»

### SQLiteè¿ç§»è„šæœ¬

```sql
-- 1. æ·»åŠ  repository_owner åˆ—ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
ALTER TABLE skills ADD COLUMN repository_owner TEXT;

-- 2. ä¸ºç°æœ‰è®°å½•å¡«å…… repository_owner
UPDATE skills
SET repository_owner = CASE
  WHEN repository_url = 'local' THEN 'local'
  ELSE substr(
    repository_url,
    instr(repository_url, 'github.com/') + 11,
    instr(
      substr(repository_url, instr(repository_url, 'github.com/') + 11),
      '/'
    ) - 1
  )
END
WHERE repository_owner IS NULL;
```

### Rustè¿ç§»ä»£ç 

```rust
impl Database {
    pub fn migrate_add_repository_owner(&self) -> Result<()> {
        // æ·»åŠ åˆ—
        self.conn.execute(
            "ALTER TABLE skills ADD COLUMN repository_owner TEXT",
            [],
        ).ok(); // å¿½ç•¥é”™è¯¯ï¼ˆåˆ—å¯èƒ½å·²å­˜åœ¨ï¼‰

        // å¡«å……æ•°æ®
        self.conn.execute(
            r#"
            UPDATE skills
            SET repository_owner = CASE
              WHEN repository_url = 'local' THEN 'local'
              ELSE substr(
                repository_url,
                instr(repository_url, 'github.com/') + 11,
                instr(
                  substr(repository_url, instr(repository_url, 'github.com/') + 11),
                  '/'
                ) - 1
              )
            END
            WHERE repository_owner IS NULL
            "#,
            [],
        )?;

        Ok(())
    }
}
```

## å®æ–½æ­¥éª¤

### é˜¶æ®µ1ï¼šæ•°æ®å±‚ï¼ˆåç«¯ï¼‰

1. âœ… æ›´æ–°Rust Skillæ¨¡å‹ï¼Œæ·»åŠ  `repository_owner` å­—æ®µ
2. âœ… å®ç°æ•°æ®åº“è¿ç§»è„šæœ¬
3. âœ… æ›´æ–°æ‰«æé€»è¾‘ï¼Œè‡ªåŠ¨å¡«å…… `repository_owner`
4. âœ… æ›´æ–°å®‰è£…é€»è¾‘ï¼Œè‡ªåŠ¨å¡«å…… `repository_owner`
5. âœ… æµ‹è¯•ç°æœ‰APIç¡®ä¿å‘åå…¼å®¹

**ä¿®æ”¹æ–‡ä»¶**:

- `src-tauri/src/models.rs`
- `src-tauri/src/services/database.rs`
- `src-tauri/src/services/skill_manager.rs`

### é˜¶æ®µ2ï¼šæ ¸å¿ƒç»„ä»¶ï¼ˆå‰ç«¯ï¼‰

1. âœ… æ›´æ–°TypeScript Skillæ¥å£
2. âœ… åˆ›å»ºå·¥å…·å‡½æ•°æ–‡ä»¶ `src/lib/utils.ts`
3. âœ… åˆ›å»º `InstalledSkillsPage.tsx`
4. âœ… åˆ›å»º `MarketplacePage.tsx`
5. âœ… æ›´æ–° `SkillCard.tsx` æ·»åŠ ä»“åº“æ ‡è¯†å¾½ç« 
6. âœ… æ›´æ–° `App.tsx` çš„Tabå¯¼èˆª

**æ–°å¢æ–‡ä»¶**:

- `src/lib/utils.ts`
- `src/components/InstalledSkillsPage.tsx`
- `src/components/MarketplacePage.tsx`

**ä¿®æ”¹æ–‡ä»¶**:

- `src/types/index.ts`
- `src/components/SkillCard.tsx`
- `src/App.tsx`

### é˜¶æ®µ3ï¼šæœç´¢å’Œç­›é€‰

1. âœ… å®ç°æœç´¢åŠŸèƒ½ï¼ˆå¸¦é˜²æŠ–ï¼‰
2. âœ… å®ç°ä»“åº“ç­›é€‰ä¸‹æ‹‰èœå•
3. âœ… å®ç°"éšè—å·²å®‰è£…"å¤é€‰æ¡†
4. âœ… æ·»åŠ ç­›é€‰é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†
5. âœ… æ·»åŠ ç»Ÿè®¡ä¿¡æ¯æ˜¾ç¤º

**æ–°å¢Hook**:

- `src/hooks/useDebouncedValue.ts`

### é˜¶æ®µ4ï¼šæ€§èƒ½ä¼˜åŒ–

1. âœ… å®‰è£…è™šæ‹Ÿæ»šåŠ¨åº“ `@tanstack/react-virtual`
2. âœ… é›†æˆè™šæ‹Ÿæ»šåŠ¨ï¼ˆå½“æŠ€èƒ½æ•° > 100æ—¶ï¼‰
3. âœ… ä¼˜åŒ–ç­›é€‰æ€§èƒ½ï¼ˆuseMemoï¼‰
4. âœ… æ·»åŠ åŠ è½½çŠ¶æ€å’Œéª¨æ¶å±
5. âœ… æµ‹è¯•å¤§æ•°æ®é‡æ€§èƒ½ï¼ˆæ¨¡æ‹Ÿ10,000ä¸ªæŠ€èƒ½ï¼‰

**æ–°å¢ä¾èµ–**:

```bash
pnpm add @tanstack/react-virtual
```

### é˜¶æ®µ5ï¼šå›½é™…åŒ–

1. âœ… æ·»åŠ ä¸­è‹±æ–‡ç¿»è¯‘é”®å€¼
2. âœ… æ›´æ–°æ‰€æœ‰UIæ–‡æœ¬ä½¿ç”¨ `t()` å‡½æ•°

**ä¿®æ”¹æ–‡ä»¶**:

- `src/i18n/locales/zh.json`
- `src/i18n/locales/en.json`

## æµ‹è¯•è®¡åˆ’

### å•å…ƒæµ‹è¯•

**å·¥å…·å‡½æ•°æµ‹è¯•**:

```typescript
describe('parseRepositoryOwner', () => {
  it('should parse GitHub URL correctly', () => {
    expect(parseRepositoryOwner('https://github.com/anthropics/skills'))
      .toBe('anthropics');
  });

  it('should handle local skills', () => {
    expect(parseRepositoryOwner('local')).toBe('æœ¬åœ°');
  });

  it('should handle invalid URLs', () => {
    expect(parseRepositoryOwner('https://example.com')).toBe('æœªçŸ¥');
  });
});
```

**ç­›é€‰é€»è¾‘æµ‹è¯•**:

```typescript
describe('Marketplace filtering', () => {
  it('should filter by search query', () => {
    // æµ‹è¯•æœç´¢è¿‡æ»¤
  });

  it('should filter by repository', () => {
    // æµ‹è¯•ä»“åº“è¿‡æ»¤
  });

  it('should filter by installation status', () => {
    // æµ‹è¯•å®‰è£…çŠ¶æ€è¿‡æ»¤
  });

  it('should combine multiple filters', () => {
    // æµ‹è¯•ç»„åˆè¿‡æ»¤
  });
});
```

### é›†æˆæµ‹è¯•

1. **æ•°æ®åº“è¿ç§»æµ‹è¯•**:

   - è¿ç§»è„šæœ¬æˆåŠŸæ‰§è¡Œ
   - ç°æœ‰æ•°æ®æ­£ç¡®å¡«å…… `repository_owner`
   - æ–°è®°å½•è‡ªåŠ¨å¡«å……è¯¥å­—æ®µ
2. **APIæµ‹è¯•**:

   - æ‰€æœ‰æŠ€èƒ½è¿”å›æ­£ç¡®çš„ `repository_owner` å€¼
   - æœ¬åœ°æŠ€èƒ½æ­£ç¡®æ ‡è®°ä¸º "local"
   - GitHubæŠ€èƒ½æ­£ç¡®è§£ææ‰€æœ‰è€…åç§°
3. **UIäº¤äº’æµ‹è¯•**:

   - Tabåˆ‡æ¢æ­£å¸¸å·¥ä½œ
   - æœç´¢åŠŸèƒ½æ­£å¸¸
   - ç­›é€‰å™¨æ­£å¸¸å·¥ä½œ
   - çŠ¶æ€åœ¨é¡µé¢åˆ‡æ¢æ—¶ä¿æŒ

### æ€§èƒ½æµ‹è¯•

1. **å¤§æ•°æ®é‡æµ‹è¯•**:

   - æ¨¡æ‹Ÿ10,000ä¸ªæŠ€èƒ½
   - æµ‹è¯•é¡µé¢åŠ è½½æ—¶é—´ï¼ˆ< 2ç§’ï¼‰
   - æµ‹è¯•æœç´¢å“åº”æ—¶é—´ï¼ˆ< 300msï¼‰
   - æµ‹è¯•è™šæ‹Ÿæ»šåŠ¨æµç•…åº¦ï¼ˆ60fpsï¼‰
2. **å†…å­˜æµ‹è¯•**:

   - è™šæ‹Ÿæ»šåŠ¨å‰åå†…å­˜å ç”¨å¯¹æ¯”
   - é•¿æ—¶é—´ä½¿ç”¨åçš„å†…å­˜ç¨³å®šæ€§

## é£é™©å’ŒæŒ‘æˆ˜

### æŠ€æœ¯é£é™©

1. **æ•°æ®åº“è¿ç§»é£é™©**:

   - **é£é™©**: ç°æœ‰æ•°æ®è¿ç§»å¯èƒ½å¤±è´¥
   - **ç¼“è§£**: åœ¨è¿ç§»å‰å¤‡ä»½æ•°æ®åº“ï¼Œæä¾›å›æ»šæ–¹æ¡ˆ
2. **æ€§èƒ½é£é™©**:

   - **é£é™©**: è™šæ‹Ÿæ»šåŠ¨å¯èƒ½åœ¨æŸäº›æƒ…å†µä¸‹å‡ºç°é—ªçƒ
   - **ç¼“è§£**: å……åˆ†æµ‹è¯•ï¼Œè°ƒæ•´ `estimateSize` å’Œ `overscan` å‚æ•°
3. **å‘åå…¼å®¹æ€§**:

   - **é£é™©**: æ–°å­—æ®µå¯èƒ½å½±å“ç°æœ‰åŠŸèƒ½
   - **ç¼“è§£**: `repository_owner` è®¾ä¸ºå¯é€‰å­—æ®µï¼Œæ—§ä»£ç ä»èƒ½æ­£å¸¸å·¥ä½œ

### ç”¨æˆ·ä½“éªŒé£é™©

1. **å­¦ä¹ æ›²çº¿**:

   - **é£é™©**: ç”¨æˆ·éœ€è¦é€‚åº”æ–°çš„é¡µé¢ç»“æ„
   - **ç¼“è§£**: æ–°è®¾è®¡ç¬¦åˆåº”ç”¨å•†åº—æ¨¡å¼ï¼Œç”¨æˆ·å·²æœ‰å¿ƒæ™ºæ¨¡å‹
2. **ç­›é€‰å™¨å¤æ‚åº¦**:

   - **é£é™©**: å¤šä¸ªç­›é€‰æ¡ä»¶å¯èƒ½è®©ç”¨æˆ·å›°æƒ‘
   - **ç¼“è§£**: æä¾›"æ¸…é™¤ç­›é€‰"æŒ‰é’®ï¼Œé»˜è®¤çŠ¶æ€ç®€å•æ˜äº†
     ## æ€»ç»“
